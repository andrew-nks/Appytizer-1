<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    
    <title>Appytizer</title>
    <meta content="" name="description">
    <meta content="" name="keywords">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,600;1,700&family=Amatic+SC:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&family=Inter:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap" rel="stylesheet">
    
    <!-- Vendor CSS Files -->
    <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
    <link href="assets/vendor/aos/aos.css" rel="stylesheet">
    <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
    <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

    <style>
      .recipe-header {
        font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;
        font-weight: bold;
      }
      
      .card:hover {
        box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2);
      }

      img {
        border-radius: 5px 5px 0 0;
      }

      .card button {
        border: none;
        outline: 0;
        padding: 12px;
        color: white;
        background-color: #000;
        text-align: center;
        cursor: pointer;
        width: 100%;
        font-size: 18px;
      }

      .price {
        color: grey;
        font-size: 22px;
      }

      .card button:hover {
        opacity: 0.7;
      }

      .bg-pic {
        width: 100px;
        height: 100px;
        opacity: 50%;
      }
    </style>
    
    <!-- Main CSS File -->
    <link rel="stylesheet" href="Style.css">
</head>

<body>
    <header id="header" class="header fixed-top d-flex align-items-center">
        <div class="container d-flex align-items-center justify-content-between">
            <a href="Home.html" class="logo d-flex align-items-center me-auto me-lg-0">
                <h1>Appytizer<span>.</span></h1>
            </a>
            
            <!-- Navigation Bar -->
            <nav id="navbar" class="navbar">
                <ul>
                    <li><a href="home.html">Home</a></li>
                    <li class="dropdown"><a href="#"><span>Recipes</span> <i class="bi bi-chevron-down dropdown-indicator"></i></a>
                        <ul>
                            <li>
                                <a href="upload.html" id="upload">Upload Recipes</a>
                            </li>
                            <li>
                                <a href="recipes.html">View Recipes</a>
                            </li>
                        </ul>
                    </li>
                    <li class="dropdown"><a href="#"><span>Places to go to</span> <i class="bi bi-chevron-down dropdown-indicator"></i></a>
                        <ul>
                            <li>
                                <a href="market.html">Market to go</a>
                            </li>
                            <li>
                                <a href="restaurant.html">Restaurant to go</a>
                            </li>
                        </ul>
                    </li>
                    <!-- Only after user login then this will be appeared -->
                    <li class="dropdown"><a href="#" id="account"><span>Account</span> <i class="bi bi-chevron-down dropdown-indicator"></i></a>
                      <ul>
                        <li>
                          <a href="setting.html" id="setting">Account Setting</a>
                        </li>
                        
                        <li>
                          <a href="savedplaces.html" id="savedplaces">&#10084; Saved Places</a>
                        </li>
                      </ul>
                    </li>
                    <li><a href="contact.html">Contact Me</a></li>
                </ul>     
            </nav>

            <!-- Login/Register  -> this will appear only if the website is not logged in -->
             <a class="btn-book-a-table" id="login" href="register.html">Register/Login</a>
            <i class="mobile-nav-toggle mobile-nav-show bi bi-list"></i>
            <i class="mobile-nav-toggle mobile-nav-hide d-none bi bi-x"></i>
        </div>
    </header>
    
    <main id="main">
        <div class="breadcrumbs">
            <div class="container">
                <div class="d-flex justify-content-between align-items-center">
                    <h2>Welcome to Appytizer</h2>
                    <ol>
                        <li>
                            <a href="recipes.html">Recipes</a>
                        </li>
                        <li>View recipes</li>
                    </ol>
                </div>
            </div>
        </div>

        <!-- Content will be here -->

        <section id="recipe-album" class="d-flex align-items-center section-bg "> 
          
          <div class="container ps-5 pe-5">

            <h1 class="recipe-header ms-3">All Recipes</h1>
            <p class="recipe-sub mb-5 ms-3"><i>All your favourtie food in one place.</i></p>
            
            <!-- Album Card design with button of like, view, comment -->
            <div id="recipe">
              <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-5" id="row">

              </div>
            </div>

            <div class="page-section mt-5 d-flex justify-content-center">
              <nav aria-label="Page navigation example">
                <ul class="pagination">
                  <li class="page-item">
                    <a class="page-link" href="#" aria-label="Previous">
                      <span aria-hidden="true">&laquo;</span>
                    </a>
                  </li>
                  <li class="page-item"><a class="page-link" href="#">1</a></li>
                  <li class="page-item"><a class="page-link" href="#">2</a></li>
                  <li class="page-item"><a class="page-link" href="#">3</a></li>
                  <li class="page-item">
                    <a class="page-link" href="#" aria-label="Next">
                      <span aria-hidden="true">&raquo;</span>
                    </a>
                  </li>
                </ul>
              </nav>
            </div>

          </div>

        </section>

    </main>

  <!-- Footer -->
  <footer id="footer" class="footer">

    <div class="container">
      <div class="row gy-3">
        <div class="col-lg-3 col-md-6 d-flex">
          <i class="bi bi-geo-alt icon"></i>
          <div>
            <h4>Address</h4>
            <p>
              80 Stamford Rd<br>
              Singapore, S178902 <br>
            </p>
          </div>

        </div>

        <div class="col-lg-3 col-md-6 footer-links d-flex">
          <i class="bi bi-telephone icon"></i>
          <div>
            <h4>Reservations</h4>
            <p>
              <strong>Phone:</strong> +65 68087960
              <br>
              <strong>Email:</strong> contact@smu.edu.com.sg
              <br>
            </p>
          </div>
        </div>

        <div class="col-lg-3 col-md-6 footer-links d-flex">
          <i class="bi bi-clock icon"></i>
          <div>
            <h4>Opening Hours</h4>
            <p>
              <strong>Monday to Friday : 8:30AM</strong> to 5:45PM
              <br>
              Saturday & Sunday: Closed
            </p>
          </div>
        </div>

        <div class="col-lg-3 col-md-6 footer-links">
          <h4>Follow Us</h4>
          <div class="social-links d-flex">
            <a href="https://twitter.com/sgSMU" class="twitter"><i class="bi bi-twitter"></i></a>
            <a href="https://www.facebook.com/sgsmu" class="facebook"><i class="bi bi-facebook"></i></a>
            <a href="https://www.instagram.com/sgsmuscis/?hl=en" class="instagram"><i class="bi bi-instagram"></i></a>
            <a href="https://www.linkedin.com/school/singapore-management-university/" class="linkedin"><i class="bi bi-linkedin"></i></a>
          </div>
        </div>

      </div>
    </div>

    <div class="container">
      <div class="copyright">
        &copy; Copyright <strong><span>Appytizer</span></strong>. All Rights Reserved
      </div>
      <div class="credits">
        <!-- All the links in the footer should remain intact. -->
        <!-- You can delete the links only if you purchased the pro version. -->
        <!-- Licensing information: https://bootstrapmade.com/license/ -->
        <!-- Purchase the pro version with working PHP/AJAX contact form: https://bootstrapmade.com/yummy-bootstrap-restaurant-website-template/ -->
        Designed by <a href="https://bootstrapmade.com/">BootstrapMade</a>
      </div>
    </div>

  </footer>

    <a href="#" class="scroll-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

    <div id="preloader"></div>

    <script type="module" >
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.12.1/firebase-app.js";
      import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.12.1/firebase-analytics.js";
      import { getStorage, ref, uploadBytes as sRef, uploadBytesResumable, getDownloadURL } from "https://www.gstatic.com/firebasejs/9.12.1/firebase-storage.js";
      
      const firebaseConfig = {
          // Your configaration code here
          apiKey: "AIzaSyAFJmlaUL5fNmNKnX37xkB-2erJ_avQvRg",
          authDomain: "appytizer-d57f2.firebaseapp.com",
          databaseURL: "https://appytizer-d57f2-default-rtdb.asia-southeast1.firebasedatabase.app",
          projectId: "appytizer-d57f2",
          storageBucket: "appytizer-d57f2.appspot.com",
          messagingSenderId: "758981637290",
          appId: "1:758981637290:web:d4b61652c85549f0854cd3",
          };

          // Initialize Firebase
          const app = initializeApp(firebaseConfig);
          const analytics = getAnalytics(app);
          
          // Get a reference to the database service
          import{getFirestore, doc, getDoc, getDocs, setDoc, collection, addDoc, updateDoc, deleteDoc, deleteField} 
          from "https://www.gstatic.com/firebasejs/9.12.1/firebase-firestore.js";
          
          const db = getFirestore();

          // Output the recipes
          const querySnapshot = await getDocs(collection(db, "recipes"));
          querySnapshot.forEach((doc) => {
            var recipeName = doc.id;
            var recipeInfo = doc.data();
            var calories = recipeInfo.newRecipe.calories;
            var fats = recipeInfo.newRecipe.fats;
            var desc = recipeInfo.newRecipe.desc;

            let result = desc.substring(0,50);

            document.getElementById("row").innerHTML += `<div class="col-lg-4">
                                                                <div class="card">
                                                                  <img src="./assets/img/food_icon.jpg" style="opacity:0.5;" alt="Avatar" style="width:50%">

                                                                  <div class="container">
                                                                    <h4><b>${recipeName}</b></h4> 
                                                                    <p class="price" style="color: grey;font-size: 22px"> Calories: ${calories}</p>
                                                                    <p>${result}...</p> 
                                                                    <a href="#" class="btn btn-outline-success" onclick="selected('${recipeName}')">View Recipe</a>
                                                                  </div>
                                                                </div>
                                                            </div>`;
          });


    </script>
	<script>
		function selected(recipeName){
              var data = {'key1': recipeName};
              localStorage.setItem('objectToPass', JSON.stringify(data));
              window.location.replace("irecipe.html")
            }
	</script>
<!-- Disable links if not logged in -->
<script>
  let status = sessionStorage.getItem('status');
  console.log(status);

  let email = sessionStorage.getItem('current_email');
      console.log(email);

  var uploadLink = document.getElementById('upload');
  var accountLink = document.getElementById('account');
  var setting = document.getElementById('setting');
  var savedplaces = document.getElementById('savedplaces');
  var savedrecipes = document.getElementById('savedrecipes');

  if (status == null) {
    document.addEventListener('click', function (e) {
        if (e.target.id === uploadLink.id) {
            e.preventDefault();
            alert('Please login to upload your recipe');
        }
        if (e.target.id === accountLink.id) {
            e.preventDefault();
            alert('Please login to view your account');
        }
        if (e.target.id === setting.id) {
            e.preventDefault();
            alert('Please login to view your settings');
        }
        if (e.target.id === savedplaces.id) {
            e.preventDefault();
            alert('Please login to view your saved places');
        }
        if (e.target.id === savedrecipes.id) {
            e.preventDefault();
            alert('Please login to view your saved recipes');
        }
    });
  }
  else if (status == 'loggedIn') {
        
        document.getElementById("login").text = 'Logout';
        login.addEventListener('click', function () {
          sessionStorage.removeItem('status');
          sessionStorage.removeItem('current_email');
          window.location.href = "home.html";
        });
        

      }

</script>

    <!-- Vendor JS Files -->
    <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="assets/vendor/aos/aos.js"></script>
    <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
    <script src="assets/vendor/purecounter/purecounter_vanilla.js"></script>
    <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
    <script src="assets/vendor/php-email-form/validate.js"></script>

    <!-- Template Main JS File -->
    <script src="assets/js/main.js"></script>
</body>
